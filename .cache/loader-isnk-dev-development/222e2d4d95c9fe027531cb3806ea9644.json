{"remainingRequest":"/home/Forest/Development/drivr/node_modules/babel-loader/lib/index.js??ref--0-1!/home/Forest/Development/drivr/client/components/asyncRoute.jsx","dependencies":[{"path":"/home/Forest/Development/drivr/client/components/asyncRoute.jsx","mtime":1501287626118},{"path":"/home/Forest/Development/drivr/node_modules/cache-loader/dist/cjs.js","mtime":1493198456000},{"path":"/home/Forest/Development/drivr/node_modules/babel-loader/lib/index.js","mtime":1498609844000}],"contextDependencies":[],"result":["import _slicedToArray from 'babel-runtime/helpers/slicedToArray';\nimport _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _createClass from 'babel-runtime/helpers/createClass';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\nvar _jsxFileName = '/home/Forest/Development/drivr/client/components/asyncRoute.jsx';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { Observable } from 'rxjs/Observable';\nimport { Subject } from 'rxjs/Subject';\nimport { injectReducers } from 'actions/reducer';\nimport 'rxjs/add/operator/map';\nimport 'rxjs/add/operator/takeUntil';\nimport 'rxjs/add/observable/zip';\nimport 'rxjs/add/observable/of';\nimport 'rxjs/add/observable/fromPromise';\n\nvar moduleDefaultExport = function moduleDefaultExport(module) {\n\treturn module.default || module;\n};\n\nfunction esModule(module, forceArray) {\n\tif (Array.isArray(module)) {\n\t\treturn module.map(moduleDefaultExport);\n\t}\n\n\tvar defaulted = moduleDefaultExport(module);\n\treturn forceArray ? [defaulted] : defaulted;\n}\n\nexport default function asyncRoute(getComponent, getReducers) {\n\tvar _class, _temp2;\n\n\treturn _temp2 = _class = function (_Component) {\n\t\t_inherits(AsyncRoute, _Component);\n\n\t\tfunction AsyncRoute() {\n\t\t\tvar _ref;\n\n\t\t\tvar _temp, _this, _ret;\n\n\t\t\t_classCallCheck(this, AsyncRoute);\n\n\t\t\tfor (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n\t\t\t\targs[_key] = arguments[_key];\n\t\t\t}\n\n\t\t\treturn _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = AsyncRoute.__proto__ || Object.getPrototypeOf(AsyncRoute)).call.apply(_ref, [this].concat(args))), _this), _this.state = {\n\t\t\t\tComponent: AsyncRoute.Component,\n\t\t\t\tReducersLoader: AsyncRoute.ReducersLoader\n\t\t\t}, _temp), _possibleConstructorReturn(_this, _ret);\n\t\t}\n\n\t\t_createClass(AsyncRoute, [{\n\t\t\tkey: 'componentWillMount',\n\t\t\tvalue: function componentWillMount() {\n\t\t\t\tvar _this2 = this;\n\n\t\t\t\tvar _state = this.state,\n\t\t\t\t    Component = _state.Component,\n\t\t\t\t    ReducersLoader = _state.ReducersLoader;\n\n\t\t\t\tvar shouldLoadReducers = !ReducersLoader && getReducers;\n\n\t\t\t\tif (!Component || shouldLoadReducers) {\n\t\t\t\t\tthis._componentWillUnmountSubject = new Subject();\n\n\t\t\t\t\tvar streams = [Component ? Observable.of(Component).takeUnitl(this._componentWillUnmountSubject) : Observable.fromPromise(getComponent()).map(esModule).map(function (Component) {\n\t\t\t\t\t\tAsyncRoute.Component = Component;\n\t\t\t\t\t\treturn Component;\n\t\t\t\t\t}).takeUntil(this._componentWillUnmountSubject)];\n\n\t\t\t\t\tif (shouldLoadReducers) {\n\t\t\t\t\t\tstreams.push(Observable.fromPromise(getReducers()).map(function (module) {\n\t\t\t\t\t\t\treturn esModule(module, true);\n\t\t\t\t\t\t}).map(function (reducers) {\n\t\t\t\t\t\t\t_this2.context.store.dispatch(injectReducers(reducers));\n\t\t\t\t\t\t\tAsyncRoute.ReducersLoader = true;\n\t\t\t\t\t\t}).takeUntil(this._componentWillUnmountSubject));\n\t\t\t\t\t}\n\n\t\t\t\t\tObservable.zip.apply(Observable, streams).takeUntil(this._componentWillUnmountSubject).subscribe(function (_ref2) {\n\t\t\t\t\t\tvar _ref3 = _slicedToArray(_ref2, 1),\n\t\t\t\t\t\t    Component = _ref3[0];\n\n\t\t\t\t\t\tif (_this2._mounted) {\n\t\t\t\t\t\t\t_this2.setState({ Component: Component });\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t_this2.state.Component = Component;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t_this2._componentWillUnmountSubject.unsubscribe();\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'componentDidMount',\n\t\t\tvalue: function componentDidMount() {\n\t\t\t\tthis._mounted = true;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'componentWillUnmount',\n\t\t\tvalue: function componentWillUnmount() {\n\t\t\t\tif (this._componentWillUnmountSubject && !this._componentWillUnmountSubject.closed) {\n\t\t\t\t\tthis._componentWillUnmountSubject.next();\n\t\t\t\t\tthis._componentWillUnmountSubject.unsubscribe();\n\t\t\t\t}\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'render',\n\t\t\tvalue: function render() {\n\t\t\t\tvar Component = this.state.Component;\n\n\t\t\t\treturn Component ? React.createElement(Component, Object.assign({}, this.props, {\n\t\t\t\t\t__source: {\n\t\t\t\t\t\tfileName: _jsxFileName,\n\t\t\t\t\t\tlineNumber: 96\n\t\t\t\t\t},\n\t\t\t\t\t__self: this\n\t\t\t\t})) : null;\n\t\t\t}\n\t\t}]);\n\n\t\treturn AsyncRoute;\n\t}(Component), _class.contextTypes = {\n\t\tstore: PropTypes.shape({\n\t\t\tdispatch: PropTypes.func.isRequired\n\t\t})\n\t}, _class.Component = null, _class.ReducersLoader = false, _temp2;\n}",{"version":3,"sources":["../client/components/asyncRoute.jsx"],"names":["React","PropTypes","Observable","Subject","injectReducers","moduleDefaultExport","module","default","esModule","forceArray","Array","isArray","map","defaulted","asyncRoute","getComponent","getReducers","state","Component","AsyncRoute","ReducersLoader","shouldLoadReducers","_componentWillUnmountSubject","streams","of","takeUnitl","fromPromise","takeUntil","push","reducers","context","store","dispatch","zip","subscribe","_mounted","setState","unsubscribe","closed","next","props","contextTypes","shape","func","isRequired"],"mappings":"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","file":"asyncRoute.jsx","sourceRoot":"/home/Forest/Development/drivr/tasks","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Observable } from 'rxjs/Observable';\nimport { Subject } from 'rxjs/Subject';\nimport { injectReducers } from 'actions/reducer';\nimport 'rxjs/add/operator/map';\nimport 'rxjs/add/operator/takeUntil';\nimport 'rxjs/add/observable/zip';\nimport 'rxjs/add/observable/of';\nimport 'rxjs/add/observable/fromPromise';\n\nconst moduleDefaultExport = module => module.default || module;\n\nfunction esModule(module, forceArray) {\n\tif (Array.isArray(module)) {\n\t\treturn module.map(moduleDefaultExport);\n\t}\n\n\tconst defaulted = moduleDefaultExport(module);\n\treturn forceArray ? [defaulted] : defaulted; \n}\n\nexport default function asyncRoute(getComponent, getReducers) {\n\treturn class AsyncRoute extends Component {\n\t\tstatic contextTypes = {\n\t\t\tstore: PropTypes.shape({\n\t\t\t\tdispatch: PropTypes.func.isRequired,\n\t\t\t}),\n\t\t};\n\t\tstatic Component = null;\n\t\tstatic ReducersLoader = false;\n\n\t\tstate = {\n\t\t\tComponent: AsyncRoute.Component,\n\t\t\tReducersLoader: AsyncRoute.ReducersLoader,\n\t\t};\n\n\t\tcomponentWillMount() {\n\t\t\tconst { Component, ReducersLoader } = this.state;\n\t\t\tconst shouldLoadReducers = !ReducersLoader && getReducers;\n\n\t\t\tif (!Component || shouldLoadReducers) {\n\t\t\t\tthis._componentWillUnmountSubject = new Subject();\n\n\t\t\t\tconst streams = [\n\t\t\t\t\tComponent\n\t\t\t\t\t\t? Observable.of(Component)\n\t\t\t\t\t\t\t.takeUnitl(this._componentWillUnmountSubject)\n\t\t\t\t\t\t: Observable.fromPromise(getComponent())\n\t\t\t\t\t\t\t.map(esModule)\n\t\t\t\t\t\t\t.map((Component) => {\n\t\t\t\t\t\t\t\tAsyncRoute.Component = Component;\n\t\t\t\t\t\t\t\treturn Component;\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.takeUntil(this._componentWillUnmountSubject)\n\t\t\t\t];\n\n\t\t\t\tif (shouldLoadReducers) {\n\t\t\t\t\tstreams.push(\n\t\t\t\t\t\tObservable.fromPromise(getReducers())\n\t\t\t\t\t\t\t.map(module => esModule(module, true))\n\t\t\t\t\t\t\t.map((reducers) => {\n\t\t\t\t\t\t\t\tthis.context.store.dispatch(injectReducers(reducers));\n\t\t\t\t\t\t\t\tAsyncRoute.ReducersLoader = true;\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.takeUntil(this._componentWillUnmountSubject)\n\t\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tObservable.zip(...streams)\n\t\t\t\t\t.takeUntil(this._componentWillUnmountSubject)\n\t\t\t\t\t.subscribe(([Component]) => {\n\t\t\t\t\t\tif (this._mounted) {\n\t\t\t\t\t\t\tthis.setState({ Component });\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.state.Component = Component;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis._componentWillUnmountSubject.unsubscribe();\n\t\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tcomponentDidMount() {\n\t\t\tthis._mounted = true;\n\t\t}\n\n\t\tcomponentWillUnmount() {\n\t\t\tif (this._componentWillUnmountSubject && !this._componentWillUnmountSubject.closed) {\n\t\t\t\tthis._componentWillUnmountSubject.next();\n\t\t\t\tthis._componentWillUnmountSubject.unsubscribe();\n\t\t\t}\n\t\t}\n\n\t\trender() {\n\t\t\tconst { Component } = this.state;\n\t\t\treturn Component ? <Component {...this.props} /> : null;\n\t\t}\n\t}\n}\n"]}]}